(()=>{var e={};e.id=399,e.ids=[399],e.modules={43:(e,s,t)=>{"use strict";t.d(s,{jH:()=>i});var r=t(43210);t(60687);var a=r.createContext(void 0);function i(e){let s=r.useContext(a);return e||s||"ltr"}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},18803:(e,s,t)=>{Promise.resolve().then(t.bind(t,95214)),Promise.resolve().then(t.bind(t,91469))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22840:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(37413),a=t(39916),i=t(44999),l=t(61883),n=t(34055);async function c(){let e=(await (0,i.UL)()).has("accessToken");return e||(0,a.redirect)("/login"),e||(0,a.redirect)("/login"),(0,r.jsx)(l.MainLayout,{children:(0,r.jsx)(n.VirtualClasses,{})})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34055:(e,s,t)=>{"use strict";t.d(s,{VirtualClasses:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call VirtualClasses() from the server but VirtualClasses is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/watkay/ReactProjects/learn-smart/student-portal/features/virtual-classes/screens/virtual-classes.tsx","VirtualClasses")},42363:(e,s,t)=>{Promise.resolve().then(t.bind(t,61883)),Promise.resolve().then(t.bind(t,34055))},43649:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},48730:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57186:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>d});var r=t(65239),a=t(48088),i=t(88170),l=t.n(i),n=t(30893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d={children:["",{children:["virtual-classes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,22840)),"/home/watkay/ReactProjects/learn-smart/student-portal/app/virtual-classes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/home/watkay/ReactProjects/learn-smart/student-portal/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/home/watkay/ReactProjects/learn-smart/student-portal/app/virtual-classes/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/virtual-classes/page",pathname:"/virtual-classes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},90494:(e,s,t)=>{"use strict";t.d(s,{s:()=>f});var r=t(60687),a=t(43210),i=t(12317),l=t(95019),n=t(55192),c=t(59821),d=t(24934),o=t(40228),u=t(48730),m=t(58869),x=t(2943),h=t(43649),p=t(25334),j=t(3018),v=t(70333),g=function(e){return e.UPCOMING="upcoming",e.JOINABLE="joinable",e.ONGOING="ongoing",e.PAST="past",e}({});function f({virtualClass:e,showCourse:s=!1}){let t=(0,i.j)(),{studentProfile:f,accessToken:N}=(0,i.G)(e=>e.auth),{isJoining:w,joinError:y}=(0,i.G)(e=>e.virtualClasses),{toast:P}=(0,v.dj)(),[A,C]=(0,a.useState)(g.UPCOMING),[b,T]=(0,a.useState)(""),k=new Date(e.scheduledStartTime),E=new Date(e.scheduledEndTime),S={hour:"2-digit",minute:"2-digit"},G=k.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}),q=k.toLocaleTimeString(void 0,S),O=E.toLocaleTimeString(void 0,S),I=async()=>{if(!f?.id||!N){P({title:"Authentication Error",description:"You must be logged in to join a class",variant:"destructive"});return}let s=await t((0,l.od)({studentProfileId:f.id,virtualClassId:e.id,token:N}));l.od.fulfilled.match(s)&&(window.open(e.meetingLink,"_blank"),P({title:"Joined Class",description:"You have successfully joined the virtual class"}))},_=(()=>{switch(A){case g.JOINABLE:return{variant:"default",text:"Joinable Now"};case g.ONGOING:return{variant:"default",text:"Ongoing"};case g.PAST:return{variant:"outline",text:"Past"};case g.UPCOMING:default:return{variant:"secondary",text:"Upcoming"}}})();return(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.ZB,{children:e.title}),(0,r.jsx)(n.BT,{children:s&&e.course?`${e.course.name} (${e.course.code})`:e.description})]}),(0,r.jsx)(c.E,{variant:_.variant,children:_.text})]})}),(0,r.jsxs)(n.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-sm",children:G})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("span",{className:"text-sm",children:[q," - ",O]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("span",{className:"text-sm",children:[e.lecturerProfile.title," ",e.lecturerProfile.user.firstName," ",e.lecturerProfile.user.lastName]})]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,r.jsxs)("span",{children:["Platform: ",e.meetingConfig.platform," â€¢ Passcode: ",e.meetingConfig.passcode]})]}),b&&(0,r.jsx)("div",{className:`text-sm font-medium ${A===g.JOINABLE||A===g.ONGOING?"text-primary":"text-muted-foreground"}`,children:b}),y&&(0,r.jsxs)(j.Fc,{variant:"destructive",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),(0,r.jsx)(j.TN,{children:y})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[e.attended&&A===g.PAST&&(0,r.jsx)(c.E,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Attended"}),(0,r.jsx)("div",{className:"flex-grow"}),(0,r.jsx)(d.$,{disabled:A===g.PAST||A===g.UPCOMING&&!e.recordingUrl||w,variant:A===g.PAST&&e.recordingUrl?"outline":"default",onClick:I,className:"ml-auto",children:w?"Joining...":A===g.PAST?e.recordingUrl?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"View Recording"}),(0,r.jsx)(p.A,{className:"ml-1 h-3 w-3"})]}):"Recording Not Available":A===g.JOINABLE||A===g.ONGOING?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"Join Now"}),(0,r.jsx)(p.A,{className:"ml-1 h-3 w-3"})]}):"Not Available Yet"})]})]})]})}},91469:(e,s,t)=>{"use strict";t.d(s,{VirtualClasses:()=>h});var r=t(60687);t(43210);var a=t(12317);t(95019);var i=t(55192),l=t(85910),n=t(71463),c=t(3018),d=t(43649),o=t(2943),u=t(40228),m=t(48730),x=t(90494);function h(){(0,a.j)();let{studentProfile:e,accessToken:s}=(0,a.G)(e=>e.auth),{virtualClasses:t,isLoading:n,error:h}=(0,a.G)(e=>e.virtualClasses);if(n)return(0,r.jsx)(p,{});if(h)return(0,r.jsxs)(c.Fc,{variant:"destructive",children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),(0,r.jsx)(c.TN,{children:h})]});if(!t.length)return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Virtual Classes"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Join live virtual classes and access recordings for your courses"})]}),(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"No Virtual Classes"}),(0,r.jsx)(i.BT,{children:"You don't have any virtual classes scheduled at this time."})]})})]});let j=new Date,v=t.filter(e=>{let s=new Date(e.scheduledStartTime),t=new Date(e.scheduledEndTime),r=Math.floor((s.getTime()-j.getTime())/6e4);return r<=5&&r>=0||j>=s&&j<=t}),g=t.filter(e=>Math.floor((new Date(e.scheduledStartTime).getTime()-j.getTime())/6e4)>5).sort((e,s)=>new Date(e.scheduledStartTime).getTime()-new Date(s.scheduledStartTime).getTime()),f=t.filter(e=>j>new Date(e.scheduledEndTime)).sort((e,s)=>new Date(s.scheduledStartTime).getTime()-new Date(e.scheduledStartTime).getTime());return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Virtual Classes"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Join live virtual classes and access recordings for your courses"})]}),v.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 text-primary"}),(0,r.jsx)("span",{children:"Joinable Now"})]}),(0,r.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,r.jsx)(x.s,{virtualClass:e,showCourse:!0},e.id))})]}),(0,r.jsxs)(l.tU,{defaultValue:"upcoming",className:"space-y-4",children:[(0,r.jsxs)(l.j7,{children:[(0,r.jsxs)(l.Xi,{value:"upcoming",className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Upcoming (",g.length,")"]})]}),(0,r.jsxs)(l.Xi,{value:"past",className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Past (",f.length,")"]})]})]}),(0,r.jsx)(l.av,{value:"upcoming",className:"space-y-4",children:0===g.length?(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Upcoming Classes"}),(0,r.jsx)(i.BT,{children:"No upcoming virtual classes at this time."})]})}):(0,r.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,r.jsx)(x.s,{virtualClass:e,showCourse:!0},e.id))})}),(0,r.jsx)(l.av,{value:"past",className:"space-y-4",children:0===f.length?(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Past Classes"}),(0,r.jsx)(i.BT,{children:"No past virtual classes available."})]})}):(0,r.jsx)("div",{className:"space-y-4",children:f.map(e=>(0,r.jsx)(x.s,{virtualClass:e,showCourse:!0},e.id))})})]})]})}function p(){return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)(n.E,{className:"h-10 w-48"}),(0,r.jsx)(n.E,{className:"h-4 w-96"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(n.E,{className:"h-10 w-96"}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.E,{className:"h-6 w-48"}),(0,r.jsx)(n.E,{className:"h-4 w-64 mt-2"})]}),(0,r.jsx)(n.E,{className:"h-5 w-24"})]})}),(0,r.jsxs)(i.Wu,{className:"space-y-4",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Array.from({length:3}).map((e,s)=>(0,r.jsx)(n.E,{className:"h-4 w-full"},s))}),(0,r.jsx)(n.E,{className:"h-4 w-full"}),(0,r.jsx)(n.E,{className:"h-10 w-32 ml-auto"})]})]})]})]})}},94735:e=>{"use strict";e.exports=require("events")},96963:(e,s,t)=>{"use strict";t.d(s,{B:()=>c});var r,a=t(43210),i=t(66156),l=(r||(r=t.t(a,2)))["useId".toString()]||(()=>void 0),n=0;function c(e){let[s,t]=a.useState(l());return(0,i.N)(()=>{e||t(e=>e??String(n++))},[e]),e||(s?`radix-${s}`:"")}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[111,408,85,440,419],()=>t(57186));module.exports=r})();
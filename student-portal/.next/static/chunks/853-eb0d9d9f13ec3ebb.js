"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{41397:(e,s,t)=>{t.d(s,{k:()=>l});var a=t(95155),r=t(12115),i=t(55863),n=t(53999);let l=r.forwardRef((e,s)=>{let{className:t,value:r,indicatorClassName:l,...d}=e;return(0,a.jsx)(i.bL,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...d,children:(0,a.jsx)(i.C1,{className:(0,n.cn)("h-full w-full flex-1 bg-primary transition-all",l),style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=i.bL.displayName},49853:(e,s,t)=>{t.d(s,{Z:()=>S});var a=t(95155),r=t(12115),i=t(35695),n=t(45527),l=t(99840),d=t(97168),o=t(76037),c=t(49026),u=t(51154),m=t(1243),x=t(81284),p=t(83367),h=t(42355),f=t(4229),j=t(13052);function g(e){let{currentQuestion:s,totalQuestions:t,onPrevious:r,onNext:i,onSubmit:n,isSubmitting:l}=e,o=s===t-1;return(0,a.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,a.jsxs)(d.$,{variant:"outline",onClick:r,disabled:0===s||l,className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:["Question ",s+1," of ",t]}),o?(0,a.jsxs)(d.$,{onClick:n,disabled:l,className:"flex items-center gap-1",children:[l?"Submitting...":"Submit Quiz",(0,a.jsx)(f.A,{className:"h-4 w-4 ml-1"})]}):(0,a.jsxs)(d.$,{variant:"outline",onClick:i,disabled:l,className:"flex items-center gap-1",children:["Next",(0,a.jsx)(j.A,{className:"h-4 w-4"})]})]})}var v=t(55747),N=t(82714),b=t(88482);function w(e){let{question:s,questionIndex:t,currentAnswer:i}=e,l=(0,n.j)(),[d,o]=(0,r.useState)(i);return(0,r.useEffect)(()=>{i&&o(i)},[i]),(0,a.jsxs)(b.Zp,{className:"mb-6",children:[(0,a.jsx)(b.aR,{children:(0,a.jsxs)(b.ZB,{className:"text-lg",children:["Question ",t+1,": ",s.question]})}),(0,a.jsx)(b.Wu,{children:"multiple_choice"===s.type&&s.options&&(0,a.jsx)(v.z,{value:d,onValueChange:e=>{o(e);let a={questionIndex:t,selectedOption:e,type:s.type};l((0,p.s4)(a))},className:"space-y-3",children:s.options.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.C,{value:e,id:"q".concat(t,"-option-").concat(s)}),(0,a.jsx)(N.J,{htmlFor:"q".concat(t,"-option-").concat(s),className:"text-base",children:e})]},s))})})]})}var y=t(41397),z=t(88145),A=t(85339),q=t(5040),C=t(40646),k=t(54861),Q=t(35169);function E(e){let{attempt:s,onClose:t}=e;if(!s.score||!s.answers||!s.quiz)return(0,a.jsxs)(b.Zp,{children:[(0,a.jsxs)(b.aR,{children:[(0,a.jsx)(b.ZB,{children:"Results Unavailable"}),(0,a.jsx)(b.BT,{children:"The quiz results could not be loaded. Please try again later."})]}),(0,a.jsx)(b.Wu,{children:(0,a.jsx)(d.$,{onClick:t,children:"Return to Quizzes"})})]});let r=Math.round(s.score/s.quiz.totalMarks*100),i=s.isPassed,n="timed_out"===s.status;return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(b.Zp,{children:[(0,a.jsx)(b.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(b.ZB,{className:"text-2xl",children:[s.quiz.title," Results"]}),(0,a.jsx)(b.BT,{children:s.quiz.description})]}),(0,a.jsx)(z.E,{variant:i?"default":"destructive",children:i?"Passed":"Failed"})]})}),(0,a.jsxs)(b.Wu,{className:"space-y-6",children:[n&&(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-amber-500 mt-0.5 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-amber-800",children:"Quiz Timed Out"}),(0,a.jsx)("p",{className:"text-amber-700 text-sm mt-1",children:"Your quiz was automatically submitted because the time limit was reached. Unanswered questions were marked as incorrect."})]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Your Score"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:[s.score," / ",s.quiz.totalMarks," (",r,"%)"]})]}),(0,a.jsx)(y.k,{value:r,className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"0%"}),(0,a.jsxs)("span",{className:"font-medium",children:["Passing: ",Math.round(s.quiz.passingMarks/s.quiz.totalMarks*100),"%"]}),(0,a.jsx)("span",{children:"100%"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-muted rounded-md p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium mb-2",children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Quiz Details"})]}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Questions:"}),(0,a.jsx)("span",{children:s.quiz.numberOfQuestions})]}),(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Time Limit:"}),(0,a.jsxs)("span",{children:[s.quiz.timeLimit," minutes"]})]}),(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Completed:"}),(0,a.jsx)("span",{children:new Date(s.endTime||"").toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"bg-muted rounded-md p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium mb-2",children:[(0,a.jsx)(C.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Performance"})]}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Correct Answers:"}),(0,a.jsx)("span",{className:"text-green-600 font-medium",children:Math.round(s.score/s.quiz.totalMarks*s.quiz.numberOfQuestions)})]}),(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Incorrect Answers:"}),(0,a.jsx)("span",{className:"text-red-600 font-medium",children:s.quiz.numberOfQuestions-Math.round(s.score/s.quiz.totalMarks*s.quiz.numberOfQuestions)})]}),(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,a.jsx)("span",{className:i?"text-green-600 font-medium":"text-red-600 font-medium",children:i?"Passed":"Failed"})]})]})]})]}),s.feedback&&(0,a.jsxs)("div",{className:"bg-muted rounded-md p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium mb-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Feedback"})]}),(0,a.jsx)("p",{className:"text-sm",children:s.feedback})]}),(0,a.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Question Review"}),s.questions.map((e,t)=>{var r;let i=null===(r=s.answers)||void 0===r?void 0:r.find(e=>e.questionIndex===t),n=(null==i?void 0:i.selectedOption)===e.correctAnswer;return(0,a.jsxs)(b.Zp,{className:"border ".concat(n?"border-green-200":"border-red-200"),children:[(0,a.jsx)(b.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)(b.ZB,{className:"text-base",children:["Question ",t+1]}),i?n?(0,a.jsxs)(z.E,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[(0,a.jsx)(C.A,{className:"h-3 w-3 mr-1"})," Correct"]}):(0,a.jsxs)(z.E,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[(0,a.jsx)(k.A,{className:"h-3 w-3 mr-1"})," Incorrect"]}):(0,a.jsxs)(z.E,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:[(0,a.jsx)(A.A,{className:"h-3 w-3 mr-1"})," Unanswered"]})]})}),(0,a.jsxs)(b.Wu,{className:"pt-0",children:[(0,a.jsx)("p",{className:"mb-2",children:e.question}),e.options&&(0,a.jsx)("div",{className:"space-y-1 mt-2 text-sm",children:e.options.map((s,t)=>(0,a.jsxs)("div",{className:"p-2 rounded-md ".concat(s===e.correctAnswer?"bg-green-50 border border-green-200":s===(null==i?void 0:i.selectedOption)&&s!==e.correctAnswer?"bg-red-50 border border-red-200":"bg-gray-50 border border-gray-200"),children:[s,s===e.correctAnswer&&(0,a.jsx)("span",{className:"ml-2 text-green-600 text-xs font-medium",children:"(Correct Answer)"}),s===(null==i?void 0:i.selectedOption)&&s!==e.correctAnswer&&(0,a.jsx)("span",{className:"ml-2 text-red-600 text-xs font-medium",children:"(Your Answer)"})]},t))}),e.explanation&&(0,a.jsxs)("div",{className:"mt-3 text-sm bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,a.jsx)("span",{className:"font-medium",children:"Explanation: "}),e.explanation]})]})]},t)})]}),(0,a.jsxs)(d.$,{onClick:t,className:"w-full mt-4 flex items-center justify-center gap-2",children:[(0,a.jsx)(Q.A,{className:"h-4 w-4"}),"Return to Quizzes"]})]})]})})}var L=t(14186);function R(e){let{onTimeExpired:s}=e,t=(0,n.j)(),{timeRemaining:i}=(0,n.G)(e=>e.quiz),[l,d]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{if(null===i)return;d(i<120);let e=setInterval(()=>{i<=1?(clearInterval(e),s()):t((0,p.sk)(i-1))},1e3);return()=>clearInterval(e)},[i,t,s]),null===i)return null;let o=Math.floor(i/60),u=i%60,x="".concat(o.toString().padStart(2,"0"),":").concat(u.toString().padStart(2,"0"));return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-lg font-semibold ".concat(l?"text-red-500":"text-primary"),children:[(0,a.jsx)(L.A,{className:"h-5 w-5 ".concat(l?"animate-pulse":"")}),(0,a.jsxs)("span",{children:["Time Remaining: ",x]})]}),l&&(0,a.jsxs)(c.Fc,{variant:"destructive",className:"bg-red-50 text-red-800 border-red-200",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsxs)(c.TN,{children:["Less than ",0===o?"1 minute":"2 minutes"," remaining! Your quiz will be automatically submitted when time expires."]})]})]})}function S(e){var s,t,h;let{quizId:f,isOpen:j,onClose:v}=e,N=(0,i.useRouter)();(0,i.usePathname)();let b=(0,n.j)(),{currentAttempt:y,isLoading:z,error:A,isSubmitting:q,answers:C,isQuizActive:k}=(0,n.G)(e=>e.quiz),{studentProfile:Q,accessToken:L}=(0,n.G)(e=>e.auth),[S,I]=(0,r.useState)(0),[O,T]=(0,r.useState)(!1),[M,F]=(0,r.useState)(!1),[D,G]=(0,r.useState)(!1),[P,Z]=(0,r.useState)(null);(0,r.useEffect)(()=>{j&&!y&&!z&&(null==Q?void 0:Q.id)&&L&&b((0,p.gi)({quizId:f,studentProfileId:Q.id,token:L}))},[j,y,z,f,null==Q?void 0:Q.id,L,b]),(0,r.useEffect)(()=>{let e=e=>{if(k&&!O)return e.preventDefault(),e.returnValue="You have an active quiz. Are you sure you want to leave?",e.returnValue};window.addEventListener("beforeunload",e);let s=N.push.bind(N),t=N.replace.bind(N);return N.push=(e,t)=>k&&!O?(Z(e),F(!0),Promise.resolve(!1)):s(e,t),N.replace=(e,s)=>k&&!O?(Z(e),F(!0),Promise.resolve(!1)):t(e,s),()=>{window.removeEventListener("beforeunload",e),N.push=s,N.replace=t}},[k,O,N]);let $=(0,r.useCallback)(()=>{if(!y||!L)return;let e=[...C];y.questions.forEach((s,t)=>{if(!e.some(e=>e.questionIndex===t)&&s.options&&s.correctAnswer){let a=s.options.filter(e=>e!==s.correctAnswer);if(a.length>0){let r=Math.floor(Math.random()*a.length),i={questionIndex:t,selectedOption:a[r],type:s.type};e.push(i)}else{let a={questionIndex:t,selectedOption:s.options[0],type:s.type};e.push(a)}}}),b((0,p.E1)({attemptId:y.id,answers:e,token:L,timedOut:!0})).then(()=>{T(!0)})},[y,L,C,b]),B=()=>{if(!y||!L)return;let e=[...C];y.questions.forEach((s,t)=>{if(!e.some(e=>e.questionIndex===t)&&s.options&&s.correctAnswer){let a=s.options.filter(e=>e!==s.correctAnswer);if(a.length>0){let r=Math.floor(Math.random()*a.length),i={questionIndex:t,selectedOption:a[r],type:s.type};e.push(i)}else{let a={questionIndex:t,selectedOption:s.options[0],type:s.type};e.push(a)}}}),b((0,p.E1)({attemptId:y.id,answers:e,token:L})).then(()=>{T(!0),G(!1)})},Y=()=>{if(k&&!O){F(!0);return}b((0,p.GV)()),b((0,p.y)(!1)),T(!1),I(0),v()};return z?(0,a.jsx)(l.lG,{open:j,onOpenChange:Y,children:(0,a.jsx)(l.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Loading quiz..."})]})})}):A?(0,a.jsx)(l.lG,{open:j,onOpenChange:Y,children:(0,a.jsx)(l.Cf,{className:"sm:max-w-[600px]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(c.TN,{children:A})]}),(0,a.jsx)(d.$,{onClick:Y,className:"w-full",children:"Close"})]})})}):O&&y?(0,a.jsx)(l.lG,{open:j,onOpenChange:Y,children:(0,a.jsx)(l.Cf,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:(0,a.jsx)(E,{attempt:y,onClose:Y})})}):M?(0,a.jsx)(l.lG,{open:j,onOpenChange:()=>{},children:(0,a.jsx)(l.Cf,{className:"sm:max-w-[500px]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.Fc,{variant:"destructive",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(c.TN,{children:"You have an active quiz. If you leave now, your progress will be lost and the quiz will be automatically submitted with random answers for unanswered questions."})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>F(!1),children:"Continue Quiz"}),(0,a.jsx)(d.$,{variant:"destructive",onClick:()=>{$(),F(!1),P&&(Z(null),setTimeout(()=>N.push(P),0))},children:"Exit and Submit"})]})]})})}):D?(0,a.jsx)(l.lG,{open:j,onOpenChange:()=>{},children:(0,a.jsx)(l.Cf,{className:"sm:max-w-[500px]",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.Fc,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)(c.TN,{children:"You have unanswered questions. If you submit now, these questions will be marked as incorrect."})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>G(!1),children:"Continue Quiz"}),(0,a.jsx)(d.$,{onClick:B,children:"Submit Anyway"})]})]})})}):y?(0,a.jsx)(l.lG,{open:j,onOpenChange:Y,children:(0,a.jsx)(l.Cf,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:null===(s=y.quiz)||void 0===s?void 0:s.title}),(0,a.jsx)("p",{className:"text-muted-foreground",children:null===(t=y.quiz)||void 0===t?void 0:t.description})]}),(0,a.jsx)(R,{onTimeExpired:$}),(0,a.jsx)(o.w,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.Fc,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)(c.TN,{children:(null===(h=y.quiz)||void 0===h?void 0:h.instructions)||"Answer all questions. Your progress is saved automatically."})]}),y.questions[S]&&(0,a.jsx)(w,{question:y.questions[S],questionIndex:S,currentAnswer:(e=>{let s=C.find(s=>s.questionIndex===e);return null==s?void 0:s.selectedOption})(S)}),(0,a.jsx)(g,{currentQuestion:S,totalQuestions:y.questions.length,onPrevious:()=>{S>0&&I(S-1)},onNext:()=>{y&&S<y.questions.length-1&&I(S+1)},onSubmit:()=>{if(y&&L){if(C.length<y.questions.length){G(!0);return}B()}},isSubmitting:q})]})]})})}):null}},55747:(e,s,t)=>{t.d(s,{C:()=>o,z:()=>d});var a=t(95155),r=t(12115),i=t(54059),n=t(9428),l=t(53999);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.bL,{className:(0,l.cn)("grid gap-2",t),...r,ref:s})});d.displayName=i.bL.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.q7,{ref:s,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=i.q7.displayName},76037:(e,s,t)=>{t.d(s,{w:()=>l});var a=t(95155),r=t(12115),i=t(87489),n=t(53999);let l=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...d}=e;return(0,a.jsx)(i.b,{ref:s,decorative:l,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...d})});l.displayName=i.b.displayName},82714:(e,s,t)=>{t.d(s,{J:()=>o});var a=t(95155),r=t(12115),i=t(40968),n=t(74466),l=t(53999);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.b,{ref:s,className:(0,l.cn)(d(),t),...r})});o.displayName=i.b.displayName},83367:(e,s,t)=>{t.d(s,{GV:()=>h,Ay:()=>g,$n:()=>u,y:()=>f,sk:()=>x,gi:()=>d,E1:()=>o,s4:()=>p});var a=t(51990),r=t(23464);let i="http://localhost:5000/api",n={async startQuiz(e,s){try{return(await r.A.post("".concat(i,"/quizzes/attempts/start"),e,{headers:{Authorization:"Bearer ".concat(s)}})).data}catch(e){if(r.A.isAxiosError(e)){var t,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to start quiz")}throw Error("An unexpected error occurred")}},async submitQuiz(e,s,t){try{return(await r.A.post("".concat(i,"/quizzes/attempts/").concat(e,"/submit"),s,{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){if(r.A.isAxiosError(e)){var a,n;throw Error((null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to submit quiz")}throw Error("An unexpected error occurred")}},async getQuizAttempt(e,s){try{return(await r.A.get("".concat(i,"/quizzes/attempts/").concat(e),{headers:{Authorization:"Bearer ".concat(s)}})).data}catch(e){if(r.A.isAxiosError(e)){var t,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to get quiz attempt")}throw Error("An unexpected error occurred")}},async getStudentQuizAttempts(e,s){try{return(await r.A.get("".concat(i,"/student-portal/").concat(e,"/quiz-attempts"),{headers:{Authorization:"Bearer ".concat(s)}})).data}catch(e){if(r.A.isAxiosError(e)){var t,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to get quiz attempts")}throw Error("An unexpected error occurred")}}},l={currentAttempt:null,attempts:[],isLoading:!1,error:null,timeRemaining:null,isSubmitting:!1,isQuizActive:!1,answers:[]},d=(0,a.zD)("quiz/startQuiz",async(e,s)=>{let{quizId:t,studentProfileId:a,token:r}=e,{rejectWithValue:i}=s;try{return await n.startQuiz({quizId:t,studentProfileId:a},r)}catch(e){if(e instanceof Error)return i(e.message);return i("An unknown error occurred")}}),o=(0,a.zD)("quiz/submitQuiz",async(e,s)=>{let{attemptId:t,answers:a,token:r,timedOut:i=!1}=e,{rejectWithValue:l}=s;try{return{...await n.submitQuiz(t,{answers:a},r),timedOut:i}}catch(e){if(e instanceof Error)return l(e.message);return l("An unknown error occurred")}}),c=(0,a.zD)("quiz/getQuizAttempt",async(e,s)=>{let{attemptId:t,token:a}=e,{rejectWithValue:r}=s;try{return await n.getQuizAttempt(t,a)}catch(e){if(e instanceof Error)return r(e.message);return r("An unknown error occurred")}}),u=(0,a.zD)("quiz/getStudentQuizAttempts",async(e,s)=>{let{studentProfileId:t,token:a}=e,{rejectWithValue:r}=s;try{return await n.getStudentQuizAttempts(t,a)}catch(e){if(e instanceof Error)return r(e.message);return r("An unknown error occurred")}}),m=(0,a.Z0)({name:"quiz",initialState:l,reducers:{setTimeRemaining:(e,s)=>{e.timeRemaining=s.payload},updateAnswer:(e,s)=>{let{questionIndex:t}=s.payload,a=e.answers.findIndex(e=>e.questionIndex===t);-1!==a?e.answers[a]=s.payload:e.answers.push(s.payload)},clearCurrentQuiz:e=>{e.currentAttempt=null,e.timeRemaining=null,e.isQuizActive=!1,e.answers=[]},setQuizActive:(e,s)=>{e.isQuizActive=s.payload},resetQuizState:()=>l},extraReducers:e=>{e.addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,(e,s)=>{e.isLoading=!1,e.currentAttempt=s.payload,e.isQuizActive=!0,e.timeRemaining=60*s.payload.quiz.timeLimit,e.answers=[]}).addCase(d.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(o.pending,e=>{e.isSubmitting=!0,e.error=null}).addCase(o.fulfilled,(e,s)=>{e.isSubmitting=!1,e.isQuizActive=!1,e.currentAttempt=s.payload,e.timeRemaining=null;let t=e.attempts.findIndex(e=>e.id===s.payload.id);-1!==t?e.attempts[t]=s.payload:e.attempts.push(s.payload)}).addCase(o.rejected,(e,s)=>{e.isSubmitting=!1,e.error=s.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,s)=>{if(e.isLoading=!1,"in_progress"===s.payload.status){var t;if(e.currentAttempt=s.payload,e.isQuizActive=!0,null===(t=s.payload.quiz)||void 0===t?void 0:t.timeLimit){let t=new Date(s.payload.startTime).getTime(),a=Math.floor((new Date().getTime()-t)/1e3);e.timeRemaining=Math.max(0,60*s.payload.quiz.timeLimit-a)}}let a=e.attempts.findIndex(e=>e.id===s.payload.id);-1!==a?e.attempts[a]=s.payload:e.attempts.push(s.payload)}).addCase(c.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(u.pending,e=>{e.isLoading=!0,e.error=null}).addCase(u.fulfilled,(e,s)=>{e.isLoading=!1,e.attempts=s.payload;let t=s.payload.find(e=>"in_progress"===e.status);if(t){var a;if(e.currentAttempt=t,e.isQuizActive=!0,null===(a=t.quiz)||void 0===a?void 0:a.timeLimit){let s=new Date(t.startTime).getTime(),a=Math.floor((new Date().getTime()-s)/1e3);e.timeRemaining=Math.max(0,60*t.quiz.timeLimit-a)}}}).addCase(u.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload})}}),{setTimeRemaining:x,updateAnswer:p,clearCurrentQuiz:h,setQuizActive:f,resetQuizState:j}=m.actions,g=m.reducer},99840:(e,s,t)=>{t.d(s,{Cf:()=>m,Es:()=>p,L3:()=>h,c7:()=>x,lG:()=>d,rr:()=>f,zM:()=>o});var a=t(95155),r=t(12115),i=t(15452),n=t(54416),l=t(53999);let d=i.bL,o=i.l9,c=i.ZL;i.bm;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.hJ,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=i.hJ.displayName;let m=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(i.UC,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[r,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.UC.displayName;let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};x.displayName="DialogHeader";let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};p.displayName="DialogFooter";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.hE,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});h.displayName=i.hE.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.VY,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});f.displayName=i.VY.displayName}}]);
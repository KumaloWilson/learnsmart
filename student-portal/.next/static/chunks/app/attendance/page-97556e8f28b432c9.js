(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{18545:(e,s,r)=>{"use strict";r.d(s,{Attendance:()=>k});var a=r(95155),t=r(12115),d=r(45527),l=r(93841),n=r(88482),c=r(49026),i=r(27737),o=r(1243),m=r(42355),x=r(13052),u=r(69895),f=r(53999),h=r(97168);function p(e){let{className:s,classNames:r,showOutsideDays:t=!0,...d}=e;return(0,a.jsx)(u.hv,{showOutsideDays:t,className:(0,f.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,f.cn)((0,h.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,f.cn)((0,h.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{...s}=e;return(0,a.jsx)(m.A,{className:"h-4 w-4"})},IconRight:e=>{let{...s}=e;return(0,a.jsx)(x.A,{className:"h-4 w-4"})}},...d})}p.displayName="Calendar";var g=r(88145),j=r(40646),v=r(54861);function N(e){let{records:s}=e,[r,d]=(0,t.useState)(new Date),l=s.reduce((e,s)=>{let r=new Date(s.date).toISOString().split("T")[0];return e[r]||(e[r]=[]),e[r].push(s),e},{}),c=l[r?r.toISOString().split("T")[0]:""]||[];return(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Attendance Calendar"}),(0,a.jsx)(n.BT,{children:"View your attendance records by date"})]}),(0,a.jsx)(n.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(p,{mode:"single",selected:r,onSelect:d,className:"rounded-md border",modifiers:{present:Object.keys(l).filter(e=>l[e].some(e=>e.isPresent)).map(e=>new Date(e)),absent:Object.keys(l).filter(e=>l[e].some(e=>!e.isPresent)).map(e=>new Date(e))},modifiersClassNames:{present:"bg-green-100 text-green-700 font-medium",absent:"bg-red-100 text-red-700 font-medium"}}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-2 h-3 w-3 rounded-full bg-green-100"}),(0,a.jsx)("span",{children:"Present"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-2 h-3 w-3 rounded-full bg-red-100"}),(0,a.jsx)("span",{children:"Absent"})]})]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:r?r.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"}):"Select a date"}),c.length>0?(0,a.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.course.code,": ",e.topic]}),e.isPresent?(0,a.jsxs)(g.E,{className:"bg-green-100 text-green-700 border-green-200",children:[(0,a.jsx)(j.A,{className:"mr-1 h-3 w-3"}),"Present"]}):(0,a.jsxs)(g.E,{className:"bg-red-100 text-red-700 border-red-200",children:[(0,a.jsx)(v.A,{className:"mr-1 h-3 w-3"}),"Absent"]})]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-muted-foreground",children:e.notes})]},e.id))}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No attendance records for this date."})]})]})})]})}var y=r(41397),b=r(58700),w=r(83540),A=r(8782),C=r(34e3),R=r(54811),E=r(94517);function _(e){let{records:s}=e,r=s.length,t=s.filter(e=>e.isPresent).length,d=r>0?t/r*100:0,l=Object.values(s.reduce((e,s)=>{let r=s.course.id;return e[r]||(e[r]={courseId:r,courseName:s.course.name,courseCode:s.course.code,total:0,attended:0}),e[r].total+=1,s.isPresent&&(e[r].attended+=1),e},{})).map(e=>({...e,rate:e.total>0?e.attended/e.total*100:0})),c=[{name:"Present",value:t,color:"#4ade80"},{name:"Absent",value:r-t,color:"#f87171"}];return(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{children:"Attendance Overview"}),(0,a.jsx)(n.BT,{children:"Your attendance statistics across all courses"})]}),(0,a.jsxs)(g.E,{className:"".concat(d>=80?"bg-green-500":d>=60?"bg-yellow-500":"bg-red-500"),children:[d.toFixed(0),"% Overall Attendance"]})]})}),(0,a.jsx)(n.Wu,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"h-40",children:(0,a.jsxs)(b.at,{children:[(0,a.jsx)(b.t1,{children:(0,a.jsx)(w.u,{width:"100%",height:"100%",children:(0,a.jsxs)(A.r,{children:[(0,a.jsx)(C.F,{data:c,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,paddingAngle:5,dataKey:"value",children:c.map((e,s)=>(0,a.jsx)(R.f,{fill:e.color},"cell-".concat(s)))}),(0,a.jsx)(E.m,{content:e=>{let{active:s,payload:t}=e;if(!s||!t||0===t.length)return null;let d=t[0].payload,l=d.value,n=(l/r*100).toFixed(0);return(0,a.jsx)("div",{className:"bg-white p-2 border rounded shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:d.color}}),(0,a.jsxs)("span",{className:"font-medium",children:[d.name,": ",l," classes (",n,"%)"]})]})})}})]})})}),(0,a.jsx)(b._3,{items:c.map(e=>({name:e.name,color:e.color}))})]})})}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Attendance by Course"}),l.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm",children:[e.courseCode,": ",e.courseName]}),(0,a.jsxs)("div",{className:"text-sm",children:[e.attended,"/",e.total," (",e.rate.toFixed(0),"%)"]})]}),(0,a.jsx)(y.k,{value:e.rate,className:"h-2 ".concat(e.rate>=80?"bg-green-100":e.rate>=60?"bg-yellow-100":"bg-red-100"),indicatorClassName:"".concat(e.rate>=80?"bg-green-500":e.rate>=60?"bg-yellow-500":"bg-red-500")})]},e.courseId))]})]})})]})}function k(){let e=(0,d.j)(),{studentProfile:s,accessToken:r}=(0,d.G)(e=>e.auth),{records:i,isLoading:m,error:x}=(0,d.G)(e=>e.attendance);return((0,t.useEffect)(()=>{(null==s?void 0:s.id)&&r&&e((0,l.c0)({studentProfileId:s.id,token:r}))},[e,null==s?void 0:s.id,r]),m||!s)?(0,a.jsx)(T,{}):x?(0,a.jsxs)(c.Fc,{variant:"destructive",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)(c.TN,{children:x})]}):i.length?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Attendance"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track your attendance records for all courses."})]}),(0,a.jsx)(_,{records:i}),(0,a.jsx)(N,{records:i})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Attendance"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track your attendance records for all courses."}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"No Attendance Records"}),(0,a.jsx)(n.BT,{children:"You don't have any attendance records yet."})]})})]})}function T(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)(i.E,{className:"h-10 w-48"}),(0,a.jsx)(i.E,{className:"h-4 w-96"})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.E,{className:"h-6 w-48"}),(0,a.jsx)(i.E,{className:"h-4 w-64 mt-2"})]}),(0,a.jsx)(i.E,{className:"h-6 w-32"})]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(i.E,{className:"h-40 w-full"}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,a.jsx)(i.E,{className:"h-4 w-32"}),Array.from({length:3}).map((e,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(i.E,{className:"h-4 w-48"}),(0,a.jsx)(i.E,{className:"h-4 w-24"})]}),(0,a.jsx)(i.E,{className:"h-2 w-full"})]},s))]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(i.E,{className:"h-6 w-48"}),(0,a.jsx)(i.E,{className:"h-4 w-64"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)(i.E,{className:"h-80 w-full md:w-1/2"}),(0,a.jsxs)("div",{className:"w-full md:w-1/2 space-y-4",children:[(0,a.jsx)(i.E,{className:"h-6 w-48"}),Array.from({length:2}).map((e,s)=>(0,a.jsx)(i.E,{className:"h-24 w-full"},s))]})]})})]})]})}},20463:(e,s,r)=>{Promise.resolve().then(r.bind(r,25811)),Promise.resolve().then(r.bind(r,18545))},41397:(e,s,r)=>{"use strict";r.d(s,{k:()=>n});var a=r(95155),t=r(12115),d=r(55863),l=r(53999);let n=t.forwardRef((e,s)=>{let{className:r,value:t,indicatorClassName:n,...c}=e;return(0,a.jsx)(d.bL,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...c,children:(0,a.jsx)(d.C1,{className:(0,l.cn)("h-full w-full flex-1 bg-primary transition-all",n),style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});n.displayName=d.bL.displayName},49026:(e,s,r)=>{"use strict";r.d(s,{Fc:()=>c,TN:()=>o,XL:()=>i});var a=r(95155),t=r(12115),d=r(74466),l=r(53999);let n=(0,d.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=t.forwardRef((e,s)=>{let{className:r,variant:t,...d}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(n({variant:t}),r),...d})});c.displayName="Alert";let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...t})});i.displayName="AlertTitle";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...t})});o.displayName="AlertDescription"},58700:(e,s,r)=>{"use strict";r.d(s,{HJ:()=>o,Nt:()=>i,_3:()=>c,at:()=>l,t1:()=>n});var a=r(95155),t=r(12115),d=r(53999);let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)("dark:bg-zinc-950 rounded-md border bg-white",r),ref:s,...t})});l.displayName="ChartContainer";let n=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)("",r),ref:s,...t})});n.displayName="Chart";let c=t.forwardRef((e,s)=>{let{className:r,items:t,...l}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex items-center justify-center space-x-2 text-sm",r),ref:s,...l,children:null==t?void 0:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{className:"block h-2 w-2 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{children:e.name})]},e.name))})});c.displayName="ChartLegend";let i=e=>{let{items:s}=e;return(0,a.jsx)("div",{className:"rounded-md border bg-popover p-2 text-sm shadow-sm",children:s({payload:null})})};i.displayName="ChartTooltipContent";let o=e=>{let{label:s,value:r,color:t}=e;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"block h-2 w-2 rounded-full",style:{backgroundColor:t}}),(0,a.jsxs)("span",{children:[s,": ",r]})]})};o.displayName="ChartTooltipItem",t.forwardRef((e,s)=>{let{className:r,content:t,...l}=e;return(0,a.jsx)("div",{className:(0,d.cn)("",r),ref:s,...l,children:t})}).displayName="ChartTooltip"},88145:(e,s,r)=>{"use strict";r.d(s,{E:()=>n});var a=r(95155);r(12115);var t=r(74466),d=r(53999);let l=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:r,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)(l({variant:r}),s),...t})}},88482:(e,s,r)=>{"use strict";r.d(s,{BT:()=>i,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>n,wL:()=>m});var a=r(95155),t=r(12115),d=r(53999);let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});l.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",r),...t})});n.displayName="CardHeader";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});c.displayName="CardTitle";let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",r),...t})});i.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,d.cn)("p-6 pt-0",r),...t})});o.displayName="CardContent";let m=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,d.cn)("flex items-center p-6 pt-0",r),...t})});m.displayName="CardFooter"},93841:(e,s,r)=>{"use strict";r.d(s,{Ay:()=>i,c0:()=>l});var a=r(51990),t=r(23464);let d={async getAttendanceRecords(e,s){try{return(await t.A.get("".concat("https://learnsmart-6i9q.onrender.com/api","/student-portal/").concat(e,"/attendance"),{headers:{Authorization:"Bearer ".concat(s)}})).data}catch(e){if(t.A.isAxiosError(e)){var r,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to fetch attendance records")}throw Error("An unexpected error occurred")}}},l=(0,a.zD)("attendance/fetchRecords",async(e,s)=>{let{studentProfileId:r,token:a}=e,{rejectWithValue:t}=s;try{return await d.getAttendanceRecords(r,a)}catch(e){if(e instanceof Error)return t(e.message);return t("An unexpected error occurred")}}),n=(0,a.Z0)({name:"attendance",initialState:{records:[],isLoading:!1,error:null},reducers:{clearAttendanceRecords:e=>{e.records=[]}},extraReducers:e=>{e.addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,s)=>{e.isLoading=!1,e.records=s.payload}).addCase(l.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload})}}),{clearAttendanceRecords:c}=n.actions,i=n.reducer}},e=>{var s=s=>e(e.s=s);e.O(0,[997,556,985,708,811,441,684,358],()=>s(20463)),_N_E=e.O()}]);
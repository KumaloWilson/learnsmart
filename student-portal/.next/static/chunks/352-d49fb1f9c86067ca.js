"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[352],{14503:(e,t,r)=>{r.d(t,{dj:()=>f});var a=r(12115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},34964:(e,t,r)=>{r.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>l});var a=r(95155),s=r(12115),i=r(60704),n=r(53999);let l=i.bL,o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});o.displayName=i.B8.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});d.displayName=i.l9.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});c.displayName=i.UC.displayName},38982:(e,t,r)=>{r.d(t,{Ay:()=>u,I0:()=>l,od:()=>o});var a=r(51990),s=r(23464);let i="https://learnsmart-6i9q.onrender.com/api",n={async getVirtualClasses(e,t){try{return(await s.A.get("".concat(i,"/student-portal/").concat(e,"/virtual-classes/"),{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){if(s.A.isAxiosError(e)){var r,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to fetch virtual classes")}throw Error("An unexpected error occurred")}},async joinVirtualClass(e,t,r){try{return(await s.A.post("".concat(i,"/student-portal/").concat(e,"/virtual-class/join"),{virtualClassId:t,studentProfileId:e},{headers:{Authorization:"Bearer ".concat(r)}})).data}catch(e){if(s.A.isAxiosError(e)){var a,n;throw Error((null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to join virtual class")}throw Error("An unexpected error occurred")}}},l=(0,a.zD)("virtualClasses/fetchAll",async(e,t)=>{let{studentProfileId:r,token:a}=e,{rejectWithValue:s}=t;try{return await n.getVirtualClasses(r,a)}catch(e){if(e instanceof Error)return s(e.message);return s("An unexpected error occurred")}}),o=(0,a.zD)("virtualClasses/join",async(e,t)=>{let{studentProfileId:r,virtualClassId:a,token:s}=e,{rejectWithValue:i}=t;try{return await n.joinVirtualClass(r,a,s)}catch(e){if(e instanceof Error)return i(e.message);return i("An unexpected error occurred")}}),d=(0,a.Z0)({name:"virtualClasses",initialState:{virtualClasses:[],isLoading:!1,isJoining:!1,error:null,joinError:null},reducers:{clearErrors:e=>{e.error=null,e.joinError=null}},extraReducers:e=>{e.addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.isLoading=!1,e.virtualClasses=t.payload}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(o.pending,e=>{e.isJoining=!0,e.joinError=null}).addCase(o.fulfilled,e=>{e.isJoining=!1}).addCase(o.rejected,(e,t)=>{e.isJoining=!1,e.joinError=t.payload})}}),{clearErrors:c}=d.actions,u=d.reducer},49026:(e,t,r)=>{r.d(t,{Fc:()=>o,TN:()=>c,XL:()=>d});var a=r(95155),s=r(12115),i=r(74466),n=r(53999);let l=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(l({variant:s}),r),...i})});o.displayName="Alert";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});d.displayName="AlertTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...s})});c.displayName="AlertDescription"},54687:(e,t,r)=>{r.d(t,{s:()=>N});var a=r(95155),s=r(12115),i=r(45527),n=r(38982),l=r(88482),o=r(88145),d=r(97168),c=r(69074),u=r(14186),f=r(71007),m=r(9803),g=r(1243),v=r(33786),x=r(49026),p=r(14503),h=function(e){return e.UPCOMING="upcoming",e.JOINABLE="joinable",e.ONGOING="ongoing",e.PAST="past",e}({});function N(e){let{virtualClass:t,showCourse:r=!1}=e,N=(0,i.j)(),{studentProfile:j,accessToken:y}=(0,i.G)(e=>e.auth),{isJoining:A,joinError:w}=(0,i.G)(e=>e.virtualClasses),{toast:b}=(0,p.dj)(),[T,S]=(0,s.useState)(h.UPCOMING),[E,C]=(0,s.useState)(""),O=new Date(t.scheduledStartTime),I=new Date(t.scheduledEndTime),P={hour:"2-digit",minute:"2-digit"},R=O.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"}),D=O.toLocaleTimeString(void 0,P),G=I.toLocaleTimeString(void 0,P);(0,s.useEffect)(()=>{let e=()=>{let e=new Date,r=new Date(t.scheduledStartTime),a=new Date(t.scheduledEndTime),s=Math.floor((r.getTime()-e.getTime())/6e4);if(e>a)S(h.PAST),C("");else if(e>=r){S(h.ONGOING);let t=a.getTime()-e.getTime(),r=Math.floor(t/36e5),s=Math.floor(t%36e5/6e4);C("".concat(r,"h ").concat(s,"m remaining"))}else if(s<=5)S(h.JOINABLE),C("Starts in ".concat(s,"m"));else if(S(h.UPCOMING),s<60)C("Starts in ".concat(s,"m"));else if(s<1440){let e=Math.floor(s/60);C("Starts in ".concat(e,"h ").concat(s%60,"m"))}else{let e=Math.floor(s/1440);C("Starts in ".concat(e," day").concat(e>1?"s":""))}};e();let r=setInterval(e,6e4);return()=>clearInterval(r)},[t.scheduledStartTime,t.scheduledEndTime]);let M=async()=>{if(!(null==j?void 0:j.id)||!y){b({title:"Authentication Error",description:"You must be logged in to join a class",variant:"destructive"});return}let e=await N((0,n.od)({studentProfileId:j.id,virtualClassId:t.id,token:y}));n.od.fulfilled.match(e)&&(window.open(t.meetingLink,"_blank"),b({title:"Joined Class",description:"You have successfully joined the virtual class"}))},_=(()=>{switch(T){case h.JOINABLE:return{variant:"default",text:"Joinable Now"};case h.ONGOING:return{variant:"default",text:"Ongoing"};case h.PAST:return{variant:"outline",text:"Past"};case h.UPCOMING:default:return{variant:"secondary",text:"Upcoming"}}})();return(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZB,{children:t.title}),(0,a.jsx)(l.BT,{children:r&&t.course?"".concat(t.course.name," (").concat(t.course.code,")"):t.description})]}),(0,a.jsx)(o.E,{variant:_.variant,children:_.text})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:R})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm",children:[D," - ",G]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm",children:[t.lecturerProfile.title," ",t.lecturerProfile.user.firstName," ",t.lecturerProfile.user.lastName]})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:["Platform: ",t.meetingConfig.platform," â€¢ Passcode: ",t.meetingConfig.passcode]})]}),E&&(0,a.jsx)("div",{className:"text-sm font-medium ".concat(T===h.JOINABLE||T===h.ONGOING?"text-primary":"text-muted-foreground"),children:E}),w&&(0,a.jsxs)(x.Fc,{variant:"destructive",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)(x.TN,{children:w})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[t.attended&&T===h.PAST&&(0,a.jsx)(o.E,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Attended"}),(0,a.jsx)("div",{className:"flex-grow"}),(0,a.jsx)(d.$,{disabled:T===h.PAST||T===h.UPCOMING&&!t.recordingUrl||A,variant:T===h.PAST&&t.recordingUrl?"outline":"default",onClick:M,className:"ml-auto",children:A?"Joining...":T===h.PAST?t.recordingUrl?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"View Recording"}),(0,a.jsx)(v.A,{className:"ml-1 h-3 w-3"})]}):"Recording Not Available":T===h.JOINABLE||T===h.ONGOING?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Join Now"}),(0,a.jsx)(v.A,{className:"ml-1 h-3 w-3"})]}):"Not Available Yet"})]})]})]})}},88145:(e,t,r)=>{r.d(t,{E:()=>l});var a=r(95155);r(12115);var s=r(74466),i=r(53999);let n=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:r}),t),...s})}},88482:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>u});var a=r(95155),s=r(12115),i=r(53999);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"}}]);